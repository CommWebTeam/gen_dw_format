<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Format table of contents</title>
</head>

<body>
<form>
  HTML file:
  <input id="html_file" type="file" />
  <br>
  <br>
  (Optional) Enter which line the Table of Contents starts on in the HTML file:
  <input id="toc_start" type="number" value=""/>
  <br>
  <br>
  (Optional) Enter which line the Table of Contents ends on in the HTML file:&nbsp;
  <input id="toc_end" type="number" value=""/>
  <br>
  <br>
  Include any lines that should be part of the formatted table of contents, e.g. the header that states "Table of Contents". If the above values aren't filled in, the tool will search for the first two lines between &lt;br clear="all"> in the document that also contain &lt;br> (this seems to be how table of contents are formatted from what I've seen).
  <br>
  <br>
  <input type="checkbox" id="list_indent" name="list_indent" checked>
  <label for="list_indent">Look for list numberings in table entries to generate links and indent the table with</label>
  <br>
  <input type="checkbox" id="manual_list" name="manual_list">
  <label for="manual_list">List numberings are manually edited into the Dreamweaver file (the tool will remove them in the output)</label>
  <br>
  <br>
</form>
<button type="button" onclick="format_toc()">Download with WET table of contents</button>
<br>
<br>
<p>---</p>
<p>This application takes in an HTML file with default Dreamweaver table of contents formatting and reformats the table of contents to follow WET guidelines. It also generates clearer links for the table of contents, and replaces the old links in the main document with these new links.</p>
<p>It assumes Dreamweaver toc link formatting (#_Toc) initially to find IDs.</p>
<p>Note that since this code adds/removes tags while making specific assumptions about formatting / tags used, the immediate output may not be a properly formatted document if the original Dreamweaver paste is malformed enough. Be sure to go through the document and manually fix any resulting errors - Dreamweaver is helpful for this.</p>
<p>---</p>
<p>If the option to search for list numberings is selected, the tool checks each line in the table of contents to see if it starts with a list number, e.g. 3.1. The list numbering must be formatted with numbers and periods.</p>
<p>This list numbering is used for two things:
  <ul>
    <li>The full list numbering is used as the ID for that table of contents link, e.g. href="toc_3.1".</li>
    <li>The number of periods in that list number is used to decide indentation, e.g. 3.1.2 is indentated one more level than 3.1.</li>
  </ul>
  If a line does not have a list number, then it uses the indentation + 1 of the last line that does.</p>
<script src="https://commwebteam.github.io/util/format_helpers.js"></script> 
<script src="https://commwebteam.github.io/util/download.js"></script>
<script src="format_toc_array.js"></script>
</body>
</html>